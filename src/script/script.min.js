const inputAdicionar=document.querySelector("[data-inputAdicionar]"),btnAdicionar=document.querySelector("[data-btnAdicionar]"),inputPesquisar=document.querySelector("[data-inputPesquisar]"),btnDeleteAll=document.querySelector("[data-btnDeleteAll]"),ul=document.querySelector("[data-ul]"),checkboxEditar=document.querySelector("[data-checkboxEditar]"),checkboxSelectAll=document.querySelector("[data-checkboxSelectAll]"),fildsetTexto=document.querySelector(".form__texto"),checkboxnumero=document.querySelector("[data-checkboxnumero]"),textarea=document.querySelector("[data-textarea]"),btnReceber=document.querySelector("[data-btnReceber]"),btnCopiar=document.querySelector("[data-btnCopiar]"),btnAbreEnviar=document.querySelector("[data-btnAbreEnviar]"),btnEnviar=document.querySelector("[data-btnEnviar]"),btnAbreTutorial=document.querySelector("[data-btnAbreTutorial]"),btnFechaTutorial=document.querySelector("[data-btnFechaTutorial]"),btnNavegacao=document.querySelector("[data-btnNavegacao]"),btnVoltarTutorial=document.querySelector("[data-btnVoltarTutorial]"),btnAvancarTutorial=document.querySelector("[data-btnAvancarTutorial]"),modal=document.querySelector("[data-modal]"),modalTutorial=document.querySelector("[data-modalTutorial]"),btnFechaModal=document.querySelector("[data-btnFechaModal]"),dados=JSON.parse(localStorage.getItem("dadosLista"))||{itens:[]},{itens:itens}=dados;let clicouTutorial=!1,iniciou=!0,cron=null;const moverParaTopo=(el,offset=0)=>{window.scrollTo({top:el.offsetTop+offset,behavior:"smooth"})},salvaLocalStorage=(nome,item)=>{localStorage.setItem(nome,JSON.stringify(item))},capitalized=str=>str?str[0].toUpperCase()+str.substr(1):"kkkkkk",arrItensUnicos=arr=>arr&&Array.isArray(arr)?[...new Set(arr.map(i=>JSON.stringify(i)))].map(i=>JSON.parse(i)):[],criarLista=()=>{const filtro=itens.filter(item=>item.checkado),lista=filtro.reduce((acc,cur,i)=>{const temNumeros=checkboxnumero.checked?`${i+1}. `:"";return acc+`${temNumeros}${cur.item}\n`},"");textarea.value=lista},atualizaLista=(e,item)=>{item.checkado=e.target.checked,salvaLocalStorage("dadosLista",dados),criarLista(),setChekcboxIndefinido()},setChekcboxIndefinido=()=>{const labelSelectAll=document.querySelector("[data-labelSelectAll]"),checkboxSelectAll=document.querySelector("[data-checkboxSelectAll]"),checkboxsSelecionar=Array.from(document.querySelectorAll("[data-checkboxSelecionar]"));if(0===checkboxsSelecionar.length)return;const algumCheckboxMarcado=checkboxsSelecionar.some(checkbox=>checkbox.checked),todosCheckboxMarcados=checkboxsSelecionar.every(checkbox=>checkbox.checked);if(labelSelectAll.classList.remove("form__list-confg--indefinido"),checkboxSelectAll.checked=!1,todosCheckboxMarcados)return labelSelectAll.classList.remove("form__list-confg--indefinido"),void(checkboxSelectAll.checked=!0);algumCheckboxMarcado&&labelSelectAll.classList.add("form__list-confg--indefinido")},criar=e=>{e.preventDefault();const item={item:capitalized(inputAdicionar.value.toLowerCase().trim()),checkado:!1},tempArr=arrItensUnicos([item,...itens]),contemItem=itens.map(i=>JSON.stringify(i)).includes(JSON.stringify(item));if(contemItem)return inputAdicionar.value="Item existente",void setTimeout(()=>{inputAdicionar.value=""},1e3);btnAdicionar.setAttribute("disabled",""),inputAdicionar.focus(),inputAdicionar.value="",itens.length=0,tempArr.forEach(i=>itens.push(i)),salvaLocalStorage("dadosLista",dados),ler()},ler=()=>{0!==itens.length&&(itens.sort((x,y)=>{if(x.item&&y.item)return x.item.toLowerCase().localeCompare(y.item.toLowerCase())}),ul.innerHTML="",itens.forEach((item,index,array)=>{const li=document.createElement("li"),divConteiner=document.createElement("div"),divChekcbox=document.createElement("div"),label=document.createElement("label"),input=document.createElement("input"),span=document.createElement("span"),buttonEditar=document.createElement("button"),buttonApagar=document.createElement("button");li.setAttribute("class","form__list-li"),li.setAttribute("data-li",""),label.setAttribute("data-allCheckbox",""),span.setAttribute("class","checkmark"),input.setAttribute("type","checkbox"),input.setAttribute("data-checkboxSelecionar",""),input.setAttribute("id",item.item.replace(/ /g,"")),item.checkado&&(input.checked=!0),iniciou&&(li.classList.add("swashIn"),li.style.animationDelay=`.${1+index}s`,setTimeout(()=>{li.removeAttribute("style"),li.classList.remove("swashIn")},1e3)),label.classList.add("form__list-li-checkbox","checkbox-estilizado"),buttonEditar.classList.add("material-symbols-outlined","form__list-li-btn","form__list-li-btn--editar","display-none"),buttonApagar.classList.add("material-symbols-outlined","form__list-li-btn","form__list-li-btn--delete","display-none"),checkboxEditar.checked&&(label.classList.add("display-none"),buttonEditar.classList.remove("display-none"),buttonApagar.classList.remove("display-none")),buttonEditar.setAttribute("data-btnEditar",""),buttonApagar.setAttribute("data-btnDelete",""),buttonEditar.setAttribute("title","Editar"),buttonApagar.setAttribute("title","Apagar"),li.innerHTML=`\n            <label for="${item.item.replace(/ /g,"")}">\n                <p>${item.item}</p>\n            </label>\n        `,buttonEditar.innerText="edit_note",buttonApagar.innerText="delete",divChekcbox.appendChild(label),label.appendChild(input),label.appendChild(span),divConteiner.appendChild(divChekcbox),divConteiner.appendChild(buttonEditar),divConteiner.appendChild(buttonApagar),li.appendChild(divConteiner),ul.appendChild(li),input.addEventListener("change",e=>atualizaLista(e,item)),buttonEditar.addEventListener("click",e=>{e.preventDefault();const tagMain=document.querySelector("main"),liItem=e.target.parentNode.parentNode;inputAdicionar.value=item.item,array.splice(array.indexOf(item),1),salvaLocalStorage("dadosLista",dados),liItem.classList.add("tin"),setTimeout(()=>{liItem.remove()},800),btnAdicionar.removeAttribute("disabled"),moverParaTopo(tagMain,-12)}),buttonApagar.addEventListener("click",e=>{e.preventDefault();const liItem=e.target.parentNode.parentNode;array.splice(array.indexOf(item),1),salvaLocalStorage("dadosLista",dados),liItem.classList.add("animaApagar"),setTimeout(()=>{liItem.remove()},300)})}),iniciou=!1)},setDisabledBtnAdicionar=()=>{const item=inputAdicionar.value;item?btnAdicionar.removeAttribute("disabled"):btnAdicionar.setAttribute("disabled","")},setDisabledBtnReceber=()=>{if(!textarea.value)return btnReceber.style.opacity=.1,void btnReceber.setAttribute("disabled","");btnReceber.removeAttribute("disabled"),btnReceber.style.opacity=1},receberLista=e=>{e.preventDefault();const novaLista=textarea.value.split("\n").map(i=>({item:capitalized(i.toLowerCase().trim()),checkado:!1})),tempArr=arrItensUnicos([...itens,...novaLista]);itens.length=0,tempArr.forEach(i=>itens.push(i)),textarea.value="Itens duplicados foram removidos",setTimeout(()=>{textarea.value=""},1e3),moverParaTopo(inputPesquisar,-12),salvaLocalStorage("dadosLista",dados),ler()},seteModoEditar=()=>{const allCheckbox=Array.from(document.querySelectorAll("[data-allCheckbox]")),btnsEditar=Array.from(document.querySelectorAll("[data-btnEditar]")),btnsDelete=Array.from(document.querySelectorAll("[data-btnDelete]")),btns=[...btnsEditar,...btnsDelete];if(checkboxEditar.checked)return allCheckbox.forEach(Checkbox=>Checkbox.classList.add("display-none")),void btns.forEach(btn=>btn.classList.remove("display-none"));btns.forEach(btn=>btn.classList.add("display-none")),allCheckbox.forEach(Checkbox=>Checkbox.classList.remove("display-none"))},mostraElementosPesquisados=e=>{const lis=Array.from(ul.querySelectorAll("li"));lis.forEach(li=>{const termoPesquisado=e.target.value.toLowerCase(),textoLi=li.children[0].innerText.toLowerCase();li.classList.add("display-none"),textoLi.includes(termoPesquisado)&&li.classList.remove("display-none")})},apagarTudoOuCancelar=e=>{e.preventDefault();let contador=5;if(btnDeleteAll.innerText.includes("Cancelar"))return ul.classList.remove("triste"),btnDeleteAll.innerHTML='\n        <span>Apagar tudo</span>\n        <i class="material-symbols-outlined">delete</i>\n        ',void clearInterval(cron);btnDeleteAll.innerHTML="\n        <span>Cancelar... 5</span>\n    ",ul.classList.add("triste"),cron=setInterval(()=>{if(contador--,btnDeleteAll.innerHTML=`\n            <span>Cancelar... ${contador}</span>\n        `,-1===contador){clearInterval(cron),ul.classList.remove("triste"),btnDeleteAll.innerHTML='\n            <span>Apagar tudo</span>\n            <i class="material-symbols-outlined">delete</i>\n            ';const lis=document.querySelectorAll("li");lis.forEach((li,index)=>{li.style.animationDelay=`.${1+index}s`,li.classList.add("animaApagar"),setTimeout(()=>{li.remove()},500)}),itens.length=0,salvaLocalStorage("dadosLista",dados)}},1e3)},abrirModalEnviar=e=>{e.preventDefault(),textarea.value||(textarea.value="Você ainda nao tem uma lista para enviar.",setTimeout(()=>{textarea.value=""},5e3)),modal.classList.remove("display-none"),modal.showModal()},enviarParaWhatsApp=e=>{e.preventDefault();const inputTelefone=document.querySelector("[data-inputTelefone]"),mostrarMsgErroTel=()=>{const msgErroTel=document.querySelector("[data-msgErroTel]");msgErroTel.classList.contains("display-none")&&(msgErroTel.classList.remove("display-none"),setTimeout(()=>{msgErroTel.classList.add("display-none")},1e3))},titulo="Gera lista\n[̲̅b̲̅y̲̅l̲̅є̲̅σ̲̅]\n\n",linkApi="https://api.whatsapp.com/send?phone=55",texto=`&text=${titulo}${textarea.value}`,pattern=/^\(?\d{2}\)?[\s-]?[\s9]\d{4}-?\d{4}$/i;if(!inputTelefone.value||!inputTelefone.value.match(pattern))return void mostrarMsgErroTel();const telefone=inputTelefone.value.match(pattern)[0],linkCompleto=linkApi+telefone+encodeURI(texto);window.open(linkCompleto),modal.close(),modal.classList.add("display-none")},fecharModal=e=>{e.preventDefault(),modal.close(),modal.classList.add("display-none")},enviarParaAreaDeTranferencia=e=>{e.preventDefault(),textarea.value||(textarea.value="Você ainda nao tem uma lista para copiar.",setTimeout(()=>{textarea.value=""},5e3));const titulo="Gera lista\n[̲̅b̲̅y̲̅l̲̅є̲̅σ̲̅]\n\n";navigator.clipboard.writeText(titulo+textarea.value),textarea.value="Lista enviada para area de tranferencia",setTimeout(()=>{textarea.value=""},5e3)},setSubirOuDescer=e=>{e.preventDefault(),"arrow_downward"!==btnNavegacao.children[0].innerText?moverParaTopo(inputPesquisar,-12):moverParaTopo(fildsetTexto,12)},setSetaSubirOuDescer=()=>{const tamanhoDaTela=window.innerHeight,distanciaDoTopo=btnNavegacao.offsetTop;btnNavegacao.children[0].innerText=distanciaDoTopo-150>tamanhoDaTela?"arrow_upward":"arrow_downward"},setCheckedOuNaoTodosCheckbox=()=>{const labelSelectAll=document.querySelector("[data-labelSelectAll]"),checkboxsSelecionar=Array.from(document.querySelectorAll("[data-checkboxSelecionar]"));if(labelSelectAll.classList.remove("form__list-confg--indefinido"),checkboxSelectAll.checked)return checkboxsSelecionar.forEach(checkbox=>checkbox.checked=!0),itens.forEach(item=>item.checkado=!0),salvaLocalStorage("dadosLista",dados),void criarLista();itens.forEach(item=>item.checkado=!1),checkboxsSelecionar.forEach(checkbox=>checkbox.checked=!1),salvaLocalStorage("dadosLista",dados),criarLista()};ler(),setChekcboxIndefinido(),inputAdicionar.addEventListener("focus",()=>moverParaTopo(inputAdicionar,4)),inputPesquisar.addEventListener("focus",()=>moverParaTopo(inputPesquisar,-12)),textarea.addEventListener("focus",()=>moverParaTopo(fildsetTexto,12)),inputAdicionar.addEventListener("input",setDisabledBtnAdicionar),textarea.addEventListener("input",setDisabledBtnReceber),btnReceber.addEventListener("click",e=>receberLista(e)),btnAdicionar.addEventListener("click",e=>criar(e)),checkboxEditar.addEventListener("change",seteModoEditar),inputPesquisar.addEventListener("input",e=>mostraElementosPesquisados(e)),checkboxnumero.addEventListener("change",criarLista),btnDeleteAll.addEventListener("click",e=>apagarTudoOuCancelar(e)),btnAbreEnviar.addEventListener("click",e=>abrirModalEnviar(e)),btnEnviar.addEventListener("click",e=>enviarParaWhatsApp(e)),btnFechaModal.addEventListener("click",e=>fecharModal(e)),btnCopiar.addEventListener("click",e=>enviarParaAreaDeTranferencia(e)),btnNavegacao.addEventListener("click",e=>setSubirOuDescer(e)),window.addEventListener("scroll",setSetaSubirOuDescer),checkboxSelectAll.addEventListener("change",setCheckedOuNaoTodosCheckbox),btnAbreTutorial.addEventListener("click",()=>{modalTutorial.showModal(),clicouTutorial=!0,btnAbreTutorial.classList.remove("nao-clicado")}),btnFechaTutorial.addEventListener("click",()=>modalTutorial.close()),btnVoltarTutorial.addEventListener("click",()=>{const lis=document.querySelectorAll("[data-liTutorial]");let index=0;lis.forEach((item,i)=>{item.classList.contains("display-none")||(item.classList.add("spaceOutLeft"),setTimeout(()=>{item.classList.remove("spaceOutLeft"),item.classList.add("display-none")},300),index=i)}),index--,-1===index&&(index=lis.length-1),setTimeout(()=>{lis[index].classList.remove("display-none"),lis[index].classList.add("spaceInRight")},100),setTimeout(()=>{lis[index].classList.remove("spaceInRight")},300)}),btnAvancarTutorial.addEventListener("click",()=>{const lis=document.querySelectorAll("[data-liTutorial]");let index=0;lis.forEach((item,i)=>{item.classList.contains("display-none")||(item.classList.add("spaceOutRight"),setTimeout(()=>{item.classList.remove("spaceOutRight"),item.classList.add("display-none")},300),index=i)}),index++,index===lis.length&&(index=0),setTimeout(()=>{lis[index].classList.remove("display-none"),lis[index].classList.add("spaceInLeft")},100),setTimeout(()=>{lis[index].classList.remove("spaceInLeft")},300)}),document.querySelector("body").addEventListener("click",e=>{const formList=document.querySelector(".form__list"),clases=e.composedPath().map(item=>item.classList).filter(item=>item&&0!==item.length);if(clases.some(item=>item.contains("form__list")))return formList.classList.add("form__list--grande"),void moverParaTopo(inputPesquisar,-12);formList.classList.remove("form__list--grande")});